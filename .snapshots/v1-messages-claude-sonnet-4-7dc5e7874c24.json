{
  "key": "v1-messages-claude-sonnet-4-7dc5e7874c24",
  "test": {
    "name": "handles tool calls",
    "file": "tests/integration/anthropic.test.ts"
  },
  "request": {
    "body": {
      "model": "claude-sonnet-4",
      "max_tokens": 4096,
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "What is the weather in San Francisco? Use the getWeather tool."
            }
          ]
        }
      ],
      "tools": [
        {
          "name": "getWeather",
          "description": "Get the current weather for a location",
          "input_schema": {
            "type": "object",
            "properties": {
              "location": {
                "type": "string",
                "description": "The city to get weather for"
              }
            },
            "required": [
              "location"
            ],
            "additionalProperties": false,
            "$schema": "http://json-schema.org/draft-07/schema#"
          }
        }
      ],
      "tool_choice": {
        "type": "auto"
      }
    }
  },
  "response": {
    "status": 200,
    "headers": {
      "access-control-allow-origin": "*",
      "alt-svc": "h3=\":443\"; ma=86400",
      "anthropic-ratelimit-requests-limit": "500",
      "anthropic-ratelimit-requests-remaining": "499",
      "anthropic-ratelimit-requests-reset": "2026-02-06T15:46:45Z",
      "cf-cache-status": "DYNAMIC",
      "connection": "keep-alive",
      "content-encoding": "br",
      "content-type": "application/json",
      "server": "cloudflare",
      "strict-transport-security": "max-age=63072000; includeSubDomains; preload",
      "transfer-encoding": "chunked"
    },
    "body": {
      "model": "claude-sonnet-4-20250514",
      "id": "req_poe_a9d7ffa969d4440eb678d72c0970853e",
      "type": "message",
      "role": "assistant",
      "content": [
        {
          "type": "text",
          "text": "I'll get the current weather for San Francisco using the getWeather tool."
        },
        {
          "type": "tool_use",
          "id": "toolu_0148hX3RRfBQi3CpZn5by7NA",
          "name": "getWeather",
          "input": {
            "location": "San Francisco"
          }
        }
      ],
      "stop_reason": "tool_use",
      "stop_sequence": null,
      "usage": {
        "input_tokens": 428,
        "cache_creation_input_tokens": 0,
        "cache_read_input_tokens": 0,
        "cache_creation": {
          "ephemeral_5m_input_tokens": 0,
          "ephemeral_1h_input_tokens": 0
        },
        "output_tokens": 71,
        "service_tier": "standard",
        "inference_geo": "not_available"
      }
    }
  }
}