{
  "key": "v1-chat-completions-grok-4-c7595fafda42",
  "test": {
    "name": "generates structured output with xai/grok-4",
    "file": "tests/integration/other.test.ts"
  },
  "request": {
    "body": {
      "model": "grok-4",
      "response_format": {
        "type": "json_schema",
        "json_schema": {
          "schema": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "ingredients": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "steps": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "name",
              "ingredients",
              "steps"
            ],
            "additionalProperties": false,
            "$schema": "http://json-schema.org/draft-07/schema#"
          },
          "strict": true,
          "name": "response"
        }
      },
      "messages": [
        {
          "role": "user",
          "content": "Parse this recipe:\n\nBanana Smoothie\n\nIngredients:\n- 2 bananas\n- 1 cup milk\n- 1 tbsp honey\n\nSteps:\n1. Peel bananas\n2. Blend all ingredients\n3. Serve cold"
        }
      ]
    }
  },
  "response": {
    "status": 200,
    "headers": {
      "access-control-allow-headers": "Authorization, Content-Type",
      "access-control-allow-origin": "*",
      "alt-svc": "h3=\":443\"; ma=86400",
      "cf-cache-status": "DYNAMIC",
      "connection": "keep-alive",
      "content-encoding": "br",
      "content-type": "application/json",
      "openai-processing-ms": "10490",
      "openai-version": "2020-10-01",
      "server": "cloudflare",
      "strict-transport-security": "max-age=63072000; includeSubDomains; preload",
      "transfer-encoding": "chunked"
    },
    "body": {
      "id": "chatcmpl-e372fa74414fb94cfe38c59c",
      "object": "chat.completion",
      "created": 1770392840,
      "model": "grok-4",
      "choices": [
        {
          "index": 0,
          "message": {
            "role": "assistant",
            "content": " {\"name\":\"Banana Smoothie\",\"ingredients\":[\"2 bananas\",\"1 cup milk\",\"1 tbsp honey\"],\"steps\":[\"Peel bananas\",\"Blend all ingredients\",\"Serve cold\"]}"
          },
          "finish_reason": "stop"
        }
      ],
      "usage": {
        "completion_tokens": 32,
        "prompt_tokens": 837,
        "total_tokens": 869,
        "completion_tokens_details": {
          "accepted_prediction_tokens": null,
          "audio_tokens": null,
          "reasoning_tokens": 327,
          "rejected_prediction_tokens": null
        },
        "prompt_tokens_details": {
          "audio_tokens": null,
          "cached_tokens": 686
        }
      }
    }
  }
}